## Что значит RPC (Remote Procedure Call) backend в Celery?

Это означает:

* клиент отправляет задачу в очередь
* воркер выполняет задачу
* воркер отправляет результат обратно клиенту через временную очередь
* клиент ждёт ответ


В конфигурации Celery RPC указывается таким образом:

```python
result_backend = "rpc://"
```

---

## Как это выглядит под капотом?

### 1. Клиент отправляет задачу

```python
result = add.delay(2, 3)
```

### 2. Celery создаёт временную очередь

* очередь уникальна **для конкретного клиента**
* имя генерируется автоматически
* она живёт, пока клиент ждёт результат

### 3. Воркер:

* выполняет задачу
* публикует результат **в эту временную очередь**

### 4. Клиент:

* слушает эту очередь
* получает результат
* закрывает соединение

Это **классический паттерн RPC поверх очередей сообщений**.

---

## Чем RPC backend отличается от других backend’ов?

### RPC backend (`rpc://`)

**Плюсы**

* не нужен Redis / БД
* минимум инфраструктуры
* быстро

**Минусы**

* результат **нельзя получить позже**
* нельзя шарить результат между клиентами
* если клиент умер — результат потерян
* плохо подходит для long-running задач

---

### Redis / Database backend

* результат хранится долго
* можно читать из разных мест
* можно повторно получить результат

---

## Когда RPC backend — нормальный выбор

✔ короткие задачи
✔ синхронное ожидание результата
✔ один клиент → один результат
✔ не нужен history / retries / мониторинг

❌ не подходит для:

* веб-приложений
* повторного чтения результата
* аналитики
* Celery Flower / мониторинга


