## Что такое FastAPI?

### Общие сведения

* **Полное название:** FastAPI
* **Автор:** Sebastián Ramírez
* **Первая версия:** 2018
* **Основан на:** Starlette (для веб-части) и Pydantic (для валидации данных)
* **Совместим с:** Python 3.7+

---
#### Starlette — минималистичный фреймворк

[https://starlette.dev/](https://starlette.dev/)

* Starlette — это «ядро» веб-сервера, ориентированное на **асинхронность и высокую производительность**.
* Он предоставляет **только базовые вещи**: маршруты, middleware, события, WebSocket, background tasks.
* Нет встроенной поддержки валидации данных, сериализации, схем OpenAPI или автоматической документации.

То есть Starlette — это как “кирпичики”: нужно самому строить API, валидацию, документацию.  
Что допустимо для опытного разработчика — супер, для новичка — тяжело.

**Иными словами:**

* Starlette — это каркас машины, двигатель и колёса.
* FastAPI — это готовый автомобиль с салоном, навигацией и кондиционером. 

---

#### Pydantic — “инспектор данных и магический фильтр”

[https://pydantic.dev/](https://pydantic.dev/)

1. Валидирует типы данных и обязательные поля.
2. Если может: сам автоматически преобразует данные в правильные типы (например, строку `"123"` → число `123`).
3. Если не может: выбрасывает чёткую и понятную ошибку, вместо того чтобы API падало с непонятным Traceback.
4. Делает работу с данными удобной (позволяет писать код, не думая о ручной проверке данных.)


**Иными словами:**

* **Starlette** — это каркас автомобиля, 
* **FastAPI** — готовый автомобиль,   
* **Pydantic** — система контроля качества и компьютерный “интеллект”,  

---

### Основные характеристики FastAPI

1. **Высокая производительность**

   * Один из самых быстрых Python-фреймворков.
   * Сопоставим по скорости с Node.js и Go.
   * Использует **ASGI (Asynchronous Server Gateway Interface)** для поддержки асинхронных запросов.

2. **Поддержка пакета `asyncio`**

   * Полная интеграция с `async`/`await`.
   * Можно использовать awaitable библиотеки (SQLAlchemy 2.0 async, HTTPX и др.).

3. **Автоматическая генерация документации**

    * Полностью совместим с **OpenAPI 3.0** и **JSON Schema**.   
    * * Автоматически создает интерактивную документацию API:

     * **Swagger UI** (`/docs`)
     * **ReDoc** (`/redoc`)

4. **Строгая типизация благодаря Pydantic**

   * Активно использует аннотации типов Python (`typing`).
   * Автоматическая валидация входных данных и автогенерация схем OpenAPI и JSON Schema.
   * Возвращает ошибку при передаче данных "неверного" типа.

5. **Простота и краткость**

   * Минимум кода для создания рабочих эндпоинтов.
   * Высокая читаемость и удобство для начинающих и опытных разработчиков.

6. **Поддержка зависимостей (Dependency Injection)**

   * Зависимости в FastAPI — это callable-объекты, которые 
     * FastAPI вызывает автоматически 
     * и передаёт их результаты в другие функции 
       * (эндпойнты, другие зависимости, WebSocket-обработчики).
   * Зависимости позволяют переиспользовать логику, конфигурацию, сервисы и т.д.

7. **Совместимость с другими библиотеками**

   * Хорошо работает с SQLAlchemy, Tortoise ORM, databases, Celery, Redis и др.
   * Можно использовать совместно с фронтендами или мобильными приложениями через REST или WebSocket.

---

### Преимущества FastAPI

* Быстрая разработка и тестирование
* Безопасность (автоматическая обработка ошибок, проверка типов)
* Отличная документация
* Простота масштабирования

---


## Сравнение FastAPI, Flask и DRF

| Характеристика                                   | **FastAPI**                          | **Flask**                             | **Django REST Framework (DRF)**              |
|--------------------------------------------------|--------------------------------------| ------------------------------------- | -------------------------------------------- |
| **Тип фреймворка**                               | Современный API-фреймворк (на ASGI)  | Минималистичный микрофреймворк        | Расширение Django для REST API               |
| **Производительность**                           | Очень высокая (ASGI, awaitable)      | Средняя                               | Ниже средней                                 |
| **Типизация**                                    | Полная поддержка `typing` + Pydantic | Необязательная (ручная проверка)      | Частичная (через сериализаторы)              |
| **Валидация данных**                             | Автоматическая (через Pydantic)      | Требует ручной реализации             | Автоматическая (через сериализаторы)         |
| **Документация API**                             | Автоматическая (Swagger, ReDoc)      | Нет из коробки                        | Есть (через `coreapi` или `drf-yasg`)        |
| **Поддержка awaitable**                          | ✅ Полная (через `async`/`await`)     | ❌ Отсутствует (только синхронный код) | ⚠️ Частичная (в новых версиях Django)        |
| **ORM / база данных**                            | Не навязана (любая ORM)              | Не навязана                           | Django ORM встроен                           |
| **Архитектура**                                  | Легковесная, модульная               | Минималистичная, ручная настройка     | Тяжеловесная, «всё из коробки»               |
| **Dependency Injection (внедрение зависимостей)** | ✅ Есть встроенно                     | ❌ Нет                                 | ⚠️ Частично через классы и middleware        |
| **Автогенерация схем OpenAPI / JSON Schema**     | ✅ Да                                 | ❌ Нет                                 | ✅ Да (через расширения)                      |
| **WebSocket поддержка**                          | ✅ Есть                               | ❌ Нет (через расширения)              | ❌ Нет                                        |
| **Кривизна обучения**                            | Умеренная                            | Простая                               | Более высокая                                |
| **Экосистема**                                   | Современная, быстро растёт           | Зрелая, огромная                      | Очень большая (Django-плагины, ORM, админка) |
| **Тип проектов**                               | REST / GraphQL API, микросервисы     | Прототипы, простые API                | Крупные корпоративные системы                |

---

### Когда использовать

### FastAPI

* Если нужен **высокопроизводительный API** с полной **поддержкой awaitable**.
* Отличный выбор для **современных микросервисов** и **backend для фронтендов**.
* Даёт **автоматическую документацию** и строгую **валидацию данных**.

### Flask

* Если нужен **простой, гибкий и лёгкий старт**.
* Идеален для **прототипов и небольших проектов**.
* Всё можно настроить вручную.

### Django REST Framework

* Если вы уже используете **Django** или нуждаетесь в его экосистеме (ORM, админка, аутентификация).
* Подходит для **больших корпоративных решений** с монолитной архитектурой.

---

## Краткое резюме

| Сценарий                                               | Рекомендуемый фреймворк   |
|--------------------------------------------------------|---------------------------|
| Высокая производительность и современный awaitable API | **FastAPI**               |
| Простота и минимализм                                  | **Flask**                 |
| Комплексные проекты с ORM и готовой админкой           | **Django REST Framework** |

---

Сравнение **FastAPI** и **Django** как **фреймворков в целом**, а не только в контексте REST API:

## Сравнение FastAPI vs Django

| Характеристика                                    | **FastAPI**                                                                  | **Django**                                                   |
|---------------------------------------------------|------------------------------------------------------------------------------| ------------------------------------------------------------ |
| **Тип фреймворка**                                | Современный awaitable API-фреймворк                                          | Полноценный веб-фреймворк (всё-в-одном)                      |
| **Архитектура**                                   | Лёгкая, модульная, минималистичная                                           | Монолитная, комплексная                                      |
| **Поддержка awaitable**                           | ✅ Полная (`async` / `await`, ASGI)                                           | ⚠️ Частичная (с Django ≥ 3.1, не во всех компонентах)        |
| **Целевая область применения**                    | REST / GraphQL API, микросервисы, <br>backend для SPA и мобильных приложений | Полноценные веб-приложения с HTML-шаблонами, ORM и админкой  |
| **Встроенные компоненты**                         | Только маршрутизация, DI, валидация данных                                   | ORM, аутентификация, админка, шаблоны, middleware, сессии и др. |
| **Валидация данных**                              | ✅ Автоматическая (через Pydantic)                                            | ⚠️ Ограниченная (через формы и сериализаторы)                |
| **Типизация**                                     | ✅ Использует Python `typing`                                                 | ⚠️ Частичная, типизация не обязательна                       |
| **Автогенерация OpenAPI / Swagger**               | ✅ Есть из коробки                                                            | ❌ Нет (требует DRF или сторонние пакеты)                     |
| **ORM**                                           | ❌ Нет встроенной (можно выбрать: SQLAlchemy, Tortoise, Gino и др.)           | ✅ Встроенная Django ORM                                      |
| **Миграции базы данных**                          | ❌ Реализуются через сторонние ORM                                            | ✅ Встроенные миграции                                        |
| **Шаблоны и HTML**                                | ❌ Нет встроенных шаблонов                                                    | ✅ Django Templates                                           |
| **Dependency Injection (внедрение зависимостей)** | ✅ Встроено                                                                   | ❌ Отсутствует                                                |
| **Middleware / Hooks**                            | ✅ Поддержка через Starlette                                                  | ✅ Богатая система middleware                                 |
| **Документация API**                              | ✅ Swagger + ReDoc генерируются автоматически                                 | ❌ Отсутствует                                                |
| **Админка**                                       | ❌ Нет                                                                        | ✅ Есть встроенная                                            |
| **Производительность**                            | Очень высокая (ASGI, awaitable)                                              | Средняя (WSGI, синхронная модель)                            |
| **Кривизна обучения**                             | Низкая–средняя                                                               | Средняя–высокая                                              |
| **Тип проектов**                                  | Микросервисы, REST API, backend для SPA                                      | Монолитные сайты, CMS, корпоративные системы                 |

---

## Когда выбрать какой фреймворк?

### FastAPI

Подходит, если вы:

* создаёте **высокопроизводительный awaitable API**;
* строите **микросервисы** или backend для **React / Vue / Flutter / мобильных приложений**;
* хотите **строгую типизацию** и **автоматическую документацию**;
* цените **гибкость** (выбор ORM, библиотек, архитектуры).

Примеры:
микросервисы, REST/GraphQL API, backend для SPA, ML/AI сервисы, IoT.

---

### Django

Подходит, если вы:

* создаёте **традиционное веб-приложение** (с шаблонами, формами, сессиями);
* хотите **“всё из коробки”** — ORM, аутентификацию, админку, миграции;
* работаете в **команде**, где важна структура и единообразие;
* разрабатываете **монолитные системы** (CRM, ERP, CMS).

Примеры:
корпоративные веб-приложения, панели управления, сайты с пользовательскими профилями, CMS.

---

## Итог

| Сценарий                                        | Рекомендуемый <bf>фреймворк |
| ----------------------------------------------- |-----------------------------|
| Микросервисная архитектура, awaitable API       | **FastAPI**                 |
| Полноценное веб-приложение (HTML, ORM, админка) | **Django**                  |
| REST API внутри Django-проекта                  | **Django + DRF**            |




