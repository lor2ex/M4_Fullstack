## Введение

### FastAPI vs Django с точки зрения тестирования

**FastAPI** — это современный веб-фреймворк для Python для создания API.  
В отличие от Django, который ориентирован на полнофункциональные веб-приложения,  
FastAPI заточен именно под **REST/JSON API** и обладает рядом особенностей, важных для тестирования:

1. **Awaitable фреймворк по умолчанию**: 
  * маршруты могут быть `async def`, что позволяет легко обрабатывать множество запросов одновременно. 
  * Для тестов это значит, что часто придется использовать `AsyncClient` вместо привычного не эвейтэбл клиента.
  
2. **Минималистичная инфраструктура**: 
   * нет встроенного ORM или сложных моделей, как в Django, 
   * это упрощает юнит-тесты и позволяет легко мокировать зависимости.

4. **Автоматическая генерация документации**: 
   * `Swagger UI` и `Redoc` доступны сразу. 
   * Тесты могут проверять, что эндпойнты возвращают корректный JSON, 
   * а документация отражает актуальное API.

5. **Валидация данных с `Pydantic`**: 
   * данные запросов и ответов строго типизированы, 
   * поэтому тесты часто включают проверку корректной валидации.

6. **Высокая производительность**:
   * FastAPI быстрее обрабатывает запросы, 
   * что сокращает время тестов, особенно интеграционных.

---

### Чем именно отличается тестирование FastAPI от Django?

1. **Асинхронные эндпойнты**: 
   * в Django не популярны эвейтэбл запросы, 
   * в FastAPI бОльшая часть эндпойнтов может быть асинхронной 
   * поэтому нужно использовать `httpx.AsyncClient` или `pytest-asyncio`.
   
2. **Легковесный клиент для тестов**: 
   * FastAPI предоставляет `TestClient` (обычный) и `AsyncClient` (эвейтэбл), 
   * в отличие от Django, где используется встроенный `Client`.

3. **JSON-ориентированное API**: 
   * тесты проверяют JSON-ответы, статус-коды и валидацию данных, 
   * а не HTML-страницы.

4. **Мокирование зависимостей**: 
   * зависимости через `Depends` легко заменять фикстурами для тестов, 
   * в отличие от Django, где часто приходится работать с базой данных и ORM.



