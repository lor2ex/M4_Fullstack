
# üîÑ Django (pytest) VS FastAPI (pytest)

## 1. –°—Ö–æ–¥—Å—Ç–≤–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–µ–º pytest –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã**

   * –í Django –∏ FastAPI pytest –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–∞–Ω–Ω—ã—Ö, –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
   * –§–∏–∫—Å—Ç—É—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ (`pytest_asyncio.fixture`).

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤**

   * –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
   * –¢–µ—Å—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ / —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.
   * –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π.

3. **–ú–æ–∫–∏–Ω–≥ –∏ –∏–∑–æ–ª—è—Ü–∏—è**

   * –ú–æ–∫–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –æ–±—ä–µ–∫—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
   * –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤: –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —á–∏—Å—Ç—É—é —Ñ–∏–∫—Å—Ç—É—Ä—É, –Ω–µ –≤–ª–∏—è—é—â—É—é –Ω–∞ –¥—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã.

---

## 2. –†–∞–∑–ª–∏—á–∏—è

| –ê—Å–ø–µ–∫—Ç                  | Django + pytest                                         | FastAPI + pytest                                                                    |
| ----------------------- | ------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| **HTTP-–∫–ª–∏–µ–Ω—Ç**         | `Client` / `APIClient`                                  | `TestClient` (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) –∏–ª–∏ `AsyncClient` (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)                           |
| **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**       | –û–±—ã—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Channels –∏–ª–∏ DRF  | –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, SQLAlchemy, API                              |
| **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ**  | `pytest-django` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É     | –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–≤–∏–∂–æ–∫ SQLAlchemy –∏ —á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞             |
| **–ú–æ–∫–∏–Ω–≥ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | –ú–æ–∫–∞–µ–º ORM-–º–µ—Ç–æ–¥—ã (`Model.objects.get`) –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ API | –ú–æ–∫–∞–µ–º —Å–µ—Å—Å–∏–∏ SQLAlchemy, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `app.dependency_overrides` |
| **–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏**    | ORM –æ–±—ä–µ–∫—Ç—ã / —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã DRF                         | Pydantic-–º–æ–¥–µ–ª–∏ (`model_dump()`) –∏–ª–∏ ORM –æ–±—ä–µ–∫—Ç—ã SQLAlchemy                         |

---

## 3. –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–∞

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**

   * –í FastAPI —ç–Ω–¥–ø–æ–π–Ω—Ç—ã –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π awaitable.
   * –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, awaitable –∏ —Ç–µ—Å—Ç—ã `async def test_...` –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã `async def`.

2. **Dependency Injection (DI)**

   * –ú–æ–∫–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `app.dependency_overrides`.
   * –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–π–Ω—Ç—ã –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑—ã –∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

3. **Awaitable —Ñ–∏–∫—Å—Ç—É—Ä—ã –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω—ã—Ö**

   * pytest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å `yield` –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

4. **HTTP-—Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç FastAPI**

   * –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ —ç–Ω–¥–ø–æ–π–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `TestClient`/`AsyncClient`.
   * –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é, –≤–∞–ª–∏–¥–∞—Ü–∏—é Pydantic, —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã.

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π**

   * –í Django –±–∞–∑–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
   * –í FastAPI –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–≤–∏–∂–æ–∫ SQLAlchemy (`create_async_engine`) –∏ –æ—á–∏—â–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏.

