
## Детальное сравнение SQLAlchemy ORM и SQLAlchemy Core

### 1. Порог входа (сложность для программиста)

**ORM**

* Низкий / средний порог входа.
* Мышление в терминах объектов и отношений.
* SQL скрыт — понимать его не обязательно (но полезно).
* Идеально для начинающих и среднего уровня разработчиков.

**Сложность: ★★☆☆☆**

**Core**

* Средний / высокий порог входа.
* Требует понимания SQL, транзакций, связей, типов данных.
* Хорош для тех, кто мыслит как архитектор БД или любит полный контроль.

**Сложность: ★★★★☆**

---

### 2. Производительность

**ORM**

* Оптимизирована для типичных CRUD.
* Потери производительности возникают при:

  * N+1,
  * тяжёлых джойнах,
  * сложных фильтрах,
  * больших объёмах данных.
* Можно оптимизировать через `selectinload`, `joinedload`, но это требует опыта.

**Производительность: хорошая, но ограничена.**

**Core**

* Почти “чистый SQL”, но в удобной форме.
* Максимально предсказуемое поведение.
* Отлично подходит для:

  * батчевых операций,
  * аналитики,
  * сложных запросов,
  * ETL,
  * high-load микросервисов.

**Производительность: отличная.**

---

### 3. Контроль и гибкость

**ORM**

* Абстрактный уровень: меньше контроля над SQL.
* Удобно описывать связи между объектами.
* Легко работать с бизнес-логикой.
* Труднее — с нетипичными схемами или экзотическими SQL-конструкциями.

**Контроль: средний.**

**Core**

* Полный контроль над транзакциями, соединениями, SQL-выражениями.
* Поддержка всего спектра SQL: CTE, вложенные запросы, оконные функции, UNION и т. д.
* Легко адаптироваться под нестандартные схемы данных.

**Контроль: максимальный.**

---

### 4. Масштабируемость (по сложности проекта)

**ORM**

Лучше всего работает в проектах:

* малых и средних,
* классических REST/CRUD,
* сервисах с небольшой логикой на стороне базы.

Но при росте сложности SQL — может стать препятствием.

**Core**

Предпочтителен в:

* высоконагруженных системах,
* сервисах, завязанных на SQL-логику,
* архитектурах с heavy data processing,
* системах с нестандартными схемами БД.

---

### 5. Ясность кода

**ORM**

* Код компактнее.
* Ближе к бизнес-объектам.
* Меньше “шума”, проще читать.

**Ясность: высокая.**

**Core**

* Код более подробный.
* Ясность выше для тех, кто мыслит SQL.
* Сложнее в поддержке для программистов без SQL-бэкграунда.

**Ясность: зависит от команды.**

---

### 6. Изоляция уровней логики

**ORM**

* Абстракция скрывает SQL → удобнее, но может «маскировать» проблемы.
* Модель = доменный объект, запрос = метод.

**Core**

* Чёткое разделение: SQL отдельно, бизнес-логика отдельно.
* Лучше подходит для архитектур с выделенным уровнем доступа к данным.

---

### 7. Практическое применение

**Когда выбирать ORM**

* CRUD API
* Быстрые прототипы
* Приложения с простой бизнес-логикой
* Разработчики с небольшим опытом SQL
* Чтение/запись небольших объёмов данных
* Большую часть запросов можно описать через модели

**Когда выбирать Core**

* Сложные SQL и аналитические запросы
* Высокая нагрузка
* ETL / data pipelines
* Базы с большим количеством данных
* Оптимизация производительности — критична
* Мультимодульные микросервисы
* Существующие БД со сложной или «грязной» схемой

---

### 8. Возможность комбинирования ORM и Core

**Лучший подход в больших проектах — использовать оба.**

Примерная схема:

* ORM — для простых сущностей и CRUD.
* Core — для сложных запросов, батчевых операций и оптимизации.

SQLAlchemy специально создан, чтобы **ORM и Core работали вместе без конфликтов**.

---

### 9. Итоговая таблица

| Критерий           | ORM            | Core                   |
| ------------------ | -------------- | ---------------------- |
| Порог входа        | низкий/средний | высокий                |
| Производительность | хорошая        | отличная               |
| Контроль над SQL   | ограниченный   | полный                 |
| Код                | компактный     | подробный              |
| Масштабируемость   | средняя        | высокая                |
| Подходит для       | CRUD, логики   | аналитики, сложных SQL |
| Требуемые знания   | Python-модели  | SQL + архитектура БД   |

